/**
 * Generated by orval v7.11.2 ðŸº
 * Do not edit manually.
 * MyMusic.Server | v1
 * OpenAPI spec version: 1.0.0
 */

import {faker} from "@faker-js/faker";
import type {
    DataTag,
    DefinedInitialDataOptions,
    DefinedUseQueryResult,
    QueryClient,
    QueryFunction,
    QueryKey,
    UndefinedInitialDataOptions,
    UseQueryOptions,
    UseQueryResult,
} from "@tanstack/react-query";
import {useQuery} from "@tanstack/react-query";
import {delay, http, HttpResponse} from "msw";
import type {GetPlaylistResponse} from "../model";

export type getPlaylistResponse200 = {
    data: GetPlaylistResponse;
    status: 200;
};

export type getPlaylistResponseComposite = getPlaylistResponse200;

export type getPlaylistResponse = getPlaylistResponseComposite & {
    headers: Headers;
};

export const getGetPlaylistUrl = (id: number) => {
    return `/api/Playlists/${id}`;
};

export const getPlaylist = async (
    id: number,
    options?: RequestInit,
): Promise<getPlaylistResponse> => {
    const res = await fetch(getGetPlaylistUrl(id), {
        ...options,
        method: "GET",
    });

    const body = [204, 205, 304].includes(res.status) ? null : await res.text();
    const data: getPlaylistResponse["data"] = body ? JSON.parse(body) : {};

    return {
        data,
        status: res.status,
        headers: res.headers,
    } as getPlaylistResponse;
};

export const getGetPlaylistQueryKey = (id?: number) => {
    return [`/api/Playlists/${id}`] as const;
};

export const getGetPlaylistQueryOptions = <
    TData = Awaited<ReturnType<typeof getPlaylist>>,
    TError = unknown,
>(
    id: number,
    options?: {
        query?: Partial<
            UseQueryOptions<Awaited<ReturnType<typeof getPlaylist>>, TError, TData>
        >;
        fetch?: RequestInit;
    },
) => {
    const {query: queryOptions, fetch: fetchOptions} = options ?? {};

    const queryKey = queryOptions?.queryKey ?? getGetPlaylistQueryKey(id);

    const queryFn: QueryFunction<Awaited<ReturnType<typeof getPlaylist>>> = ({
                                                                                 signal,
                                                                             }) => getPlaylist(id, {signal, ...fetchOptions});

    return {
        queryKey,
        queryFn,
        enabled: !!id,
        ...queryOptions,
    } as UseQueryOptions<
        Awaited<ReturnType<typeof getPlaylist>>,
        TError,
        TData
    > & { queryKey: DataTag<QueryKey, TData, TError> };
};

export type GetPlaylistQueryResult = NonNullable<
    Awaited<ReturnType<typeof getPlaylist>>
>;
export type GetPlaylistQueryError = unknown;

export function useGetPlaylist<
    TData = Awaited<ReturnType<typeof getPlaylist>>,
    TError = unknown,
>(
    id: number,
    options: {
        query: Partial<
            UseQueryOptions<Awaited<ReturnType<typeof getPlaylist>>, TError, TData>
        > &
            Pick<
                DefinedInitialDataOptions<
                    Awaited<ReturnType<typeof getPlaylist>>,
                    TError,
                    Awaited<ReturnType<typeof getPlaylist>>
                >,
                "initialData"
            >;
        fetch?: RequestInit;
    },
    queryClient?: QueryClient,
): DefinedUseQueryResult<TData, TError> & {
    queryKey: DataTag<QueryKey, TData, TError>;
};
export function useGetPlaylist<
    TData = Awaited<ReturnType<typeof getPlaylist>>,
    TError = unknown,
>(
    id: number,
    options?: {
        query?: Partial<
            UseQueryOptions<Awaited<ReturnType<typeof getPlaylist>>, TError, TData>
        > &
            Pick<
                UndefinedInitialDataOptions<
                    Awaited<ReturnType<typeof getPlaylist>>,
                    TError,
                    Awaited<ReturnType<typeof getPlaylist>>
                >,
                "initialData"
            >;
        fetch?: RequestInit;
    },
    queryClient?: QueryClient,
): UseQueryResult<TData, TError> & {
    queryKey: DataTag<QueryKey, TData, TError>;
};
export function useGetPlaylist<
    TData = Awaited<ReturnType<typeof getPlaylist>>,
    TError = unknown,
>(
    id: number,
    options?: {
        query?: Partial<
            UseQueryOptions<Awaited<ReturnType<typeof getPlaylist>>, TError, TData>
        >;
        fetch?: RequestInit;
    },
    queryClient?: QueryClient,
): UseQueryResult<TData, TError> & {
    queryKey: DataTag<QueryKey, TData, TError>;
};

export function useGetPlaylist<
    TData = Awaited<ReturnType<typeof getPlaylist>>,
    TError = unknown,
>(
    id: number,
    options?: {
        query?: Partial<
            UseQueryOptions<Awaited<ReturnType<typeof getPlaylist>>, TError, TData>
        >;
        fetch?: RequestInit;
    },
    queryClient?: QueryClient,
): UseQueryResult<TData, TError> & {
    queryKey: DataTag<QueryKey, TData, TError>;
} {
    const queryOptions = getGetPlaylistQueryOptions(id, options);

    const query = useQuery(queryOptions, queryClient) as UseQueryResult<
        TData,
        TError
    > & { queryKey: DataTag<QueryKey, TData, TError> };

    query.queryKey = queryOptions.queryKey;

    return query;
}

export const getGetPlaylistResponseMock = (
    overrideResponse: Partial<GetPlaylistResponse> = {},
): GetPlaylistResponse => ({
    songs: Array.from(
        {length: faker.number.int({min: 1, max: 10})},
        (_, i) => i + 1,
    ).map(() => ({
        rank: faker.number.float({
            min: undefined,
            max: undefined,
            fractionDigits: 2,
        }),
        order: faker.number.int({
            min: undefined,
            max: undefined,
            multipleOf: undefined,
        }),
        id: faker.number.int({
            min: undefined,
            max: undefined,
            multipleOf: undefined,
        }),
        cover: faker.helpers.arrayElement([
            faker.number.int({
                min: undefined,
                max: undefined,
                multipleOf: undefined,
            }),
            null,
        ]),
        title: faker.string.alpha({length: {min: 10, max: 20}}),
        artists: Array.from(
            {length: faker.number.int({min: 1, max: 10})},
            (_, i) => i + 1,
        ).map(() => ({
            id: faker.number.int({
                min: undefined,
                max: undefined,
                multipleOf: undefined,
            }),
            name: faker.string.alpha({length: {min: 10, max: 20}}),
        })),
        album: {
            id: faker.number.int({
                min: undefined,
                max: undefined,
                multipleOf: undefined,
            }),
            name: faker.string.alpha({length: {min: 10, max: 20}}),
        },
        genres: Array.from(
            {length: faker.number.int({min: 1, max: 10})},
            (_, i) => i + 1,
        ).map(() => ({
            id: faker.number.int({
                min: undefined,
                max: undefined,
                multipleOf: undefined,
            }),
            name: faker.string.alpha({length: {min: 10, max: 20}}),
        })),
        year: faker.helpers.arrayElement([
            faker.number.int({
                min: undefined,
                max: undefined,
                multipleOf: undefined,
            }),
            null,
        ]),
        duration: faker.string.alpha({length: {min: 10, max: 20}}),
        isFavorite: faker.datatype.boolean(),
        isExplicit: faker.datatype.boolean(),
    })),
    ...overrideResponse,
});

export const getGetPlaylistMockHandler = (
    overrideResponse?:
        | GetPlaylistResponse
        | ((
        info: Parameters<Parameters<typeof http.get>[1]>[0],
    ) => Promise<GetPlaylistResponse> | GetPlaylistResponse),
) => {
    return http.get("*/Playlists/:id", async (info) => {
        await delay(1000);

        return new HttpResponse(
            overrideResponse !== undefined
                ? typeof overrideResponse === "function"
                    ? await overrideResponse(info)
                    : overrideResponse
                : getGetPlaylistResponseMock(),
            {status: 200, headers: {"Content-Type": "text/plain"}},
        );
    });
};
export const getPlaylistsMock = () => [getGetPlaylistMockHandler()];
